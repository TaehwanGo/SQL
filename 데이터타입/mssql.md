회사에서 현재 Azure 클라우드의 Ms SQL을 사용하고 있는데

varchar로 지정된 컬럼에 한글입력 시 깨지는 현상이 발생했고
nvarchar로 변경하니 해결되었다

이번 기회에 Ms SQL의 데이터 타입 중 자주 봤던 것들 대해 정리해보자

## 정확한 수치

### 정수형

| 데이터 형식 | 범위                                                   | 범위 식       | 스토리지 |
| ----------- | ------------------------------------------------------ | ------------- | -------- |
| bigint      | -9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807 | 2^63 ~ 2^63-1 | 8바이트  |
| int         | -2,147,483,648 ~ 2,147,483,647                         | 2^31 ~ 2^31-1 | 4바이트  |
| smallint    | -32,768 ~ 32,767                                       | 2^15 ~ 2^15-1 | 2바이트  |
| tinyint     | 0 ~ 255                                                | 2^8-1         | 1바이트  |

## 근사치

### 실수형

| 데이터 형식 | 범위                                                    | 스토리지                         |
| ----------- | ------------------------------------------------------- | -------------------------------- |
| float       | - 1.79E+308에서 -2.23E-308, 0과 2.23E-308에서 1.79E+308 | 이 값은 n의 값에 따라 달라집니다 |
| real        | - 3.40E+38에서 -1.18E-38, 0과 1.18E-38에서 3.40E+38     | 4바이트                          |

- n의 기본값은 53

| n 값    | 자리수 | 스토리지 |
| ------- | ------ | -------- |
| 1 ~ 24  | 7      | 4바이트  |
| 25 ~ 53 | 15     | 8바이트  |

## 날짜 및 시간

| 데이터 형식    | 출력                               |
| -------------- | ---------------------------------- |
| time           | 12:35.29 1234567                   |
| date           | 2017-05-08                         |
| smalldatetime  | 2017-05-08 12:35:29                |
| datetime       | 2017-05-08 12:35:29.123            |
| datetime2      | 2017-05-08 12:35:29.1234567        |
| datetimeoffset | 2017-05-08 12:35:29.1234567 +12:15 |

- datetime은 iso8601 형식이 아닌 yyyy-mm-dd hh:mm:ss[.mmm] 형식으로 저장된다

## 문자열

### 고정 크기

- char, nchar

### 가변 크기

- varchar, nvarchar

### varchar vs. nvarchar

- varchar와 char는 싱글바이트 인코딩이고
- nvarchar와 nchar는 UTF-8과 같은 멀티바이트 인코딩이다
- 한글을 저장할 때는 nvarchar를 사용해야 한다

## 참고

- https://learn.microsoft.com/ko-kr/sql/t-sql/data-types/data-types-transact-sql?view=sql-server-ver16
